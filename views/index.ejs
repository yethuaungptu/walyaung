<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
  <!--<![endif]-->
  <head>
    <% include ./partial/head %>
  </head>
  <body>
    <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>
    <!-- Body content -->

    <% include ./partial/navbar %>
    <!-- End of nav bar -->

    <div class="slider-area">
      <div class="slider">
        <div id="bg-slider" class="owl-carousel owl-theme">
          <div class="item">
            <img
              src="/assets/img/slide1/slider-image-1.jpg"
              alt="Mirror Edge"
            />
          </div>
          <div class="item">
            <img
              src="/assets/img/slide1/slider-image-2.jpg"
              alt="The Last of us"
            />
          </div>
          <div class="item">
            <img src="/assets/img/slide1/slider-image-4.jpg" alt="GTA V" />
          </div>
        </div>
      </div>
      <div class="container slider-content">
        <div class="row">
          <div
            class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-sm-12"
          >
            <h2>property Searching Just Got So Easy</h2>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eligendi
              deserunt deleniti, ullam commodi sit ipsam laboriosam velit
              adipisci quibusdam aliquam teneturo!
            </p>
            <div class="search-form wow pulse" data-wow-delay="0.8s">
              <form action="" class="form-inline">
                <button class="btn toggle-btn" type="button">
                  <i class="fa fa-bars"></i>
                </button>

                <div class="form-group">
                  <select
                    id="state"
                    class="selectpicker"
                    name="state"
                    data-live-search="true"
                    data-live-search-style="begins"
                    title="Select your State"
                  >
                    <option>New york, CA</option>
                  </select>
                </div>
                <div class="form-group">
                  <select
                    id="district"
                    name="district"
                    class="selectpicker"
                    data-live-search="true"
                    data-live-search-style="begins"
                    title="Select your city"
                  ></select>
                </div>
                <div class="form-group">
                  <select
                    id="basic"
                    class="selectpicker show-tick form-control"
                    name="status"
                  >
                    <option>-Status-</option>
                    <option value="rent">Rent</option>
                    <option value="sell">Sell</option>
                  </select>
                </div>
                <button class="btn search-btn" type="submit">
                  <i class="fa fa-search"></i>
                </button>

                <div style="display: none" class="search-toggle">
                  <div class="search-row">
                    <div class="form-group mar-r-20">
                      <label for="price-range">Price range ($):</label>
                      <input
                        type="text"
                        class="span2"
                        value=""
                        name="price"
                        data-slider-min="0"
                        data-slider-max="600"
                        data-slider-step="5"
                        data-slider-value="[0,450]"
                        id="price-range"
                      /><br />
                      <b class="pull-left color">2000$</b>
                      <b class="pull-right color">100000$</b>
                    </div>
                    <!-- End of  -->

                    <!-- End of  -->
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- property area -->
    <div
      class="content-area recent-property"
      style="padding-bottom: 60px; background-color: rgb(252, 252, 252)"
    >
      <div class="container">
        <div class="row">
          <div class="col-md-12 padding-top-40 properties-page">
            <div class="col-md-12">
              <div class="col-xs-10 page-subheader sorting pl0">
                <ul class="sort-by-list">
                  <li class="active">
                    <a
                      href="javascript:void(0);"
                      class="order_by_date"
                      data-orderby="property_date"
                      data-order="ASC"
                    >
                      Property Date <i class="fa fa-sort-amount-asc"></i>
                    </a>
                  </li>
                  <li class="">
                    <a
                      href="javascript:void(0);"
                      class="order_by_price"
                      data-orderby="property_price"
                      data-order="DESC"
                    >
                      Property Price <i class="fa fa-sort-numeric-desc"></i>
                    </a>
                  </li>
                </ul>
                <!--/ .sort-by-list-->

                <div class="items-per-page">
                  <label for="items_per_page"><b>Property per page :</b></label>
                  <div class="sel">
                    <select id="items_per_page" name="per_page">
                      <option value="3">3</option>
                      <option value="6">6</option>
                      <option value="9">9</option>
                      <option selected="selected" value="12">12</option>
                      <option value="15">15</option>
                      <option value="30">30</option>
                      <option value="45">45</option>
                      <option value="60">60</option>
                    </select>
                  </div>
                  <!--/ .sel-->
                </div>
                <!--/ .items-per-page-->
              </div>

              <div class="col-xs-2 layout-switcher">
                <a class="layout-list" href="javascript:void(0);">
                  <i class="fa fa-th-list"></i>
                </a>
                <a class="layout-grid active" href="javascript:void(0);">
                  <i class="fa fa-th"></i>
                </a>
              </div>
              <!--/ .layout-switcher-->
            </div>

            <div class="col-md-12">
              <div id="list-type" class="proerty-th">
                <% for(var i = 0 ; i < properties.length; i++){%>
                <div class="col-sm-6 col-md-3 p0">
                  <div class="box-two proerty-item">
                    <div class="item-thumb">
                      <a href="/properties/<%= properties[i]._id%>"
                        ><img src="<%= properties[i].profile%>"
                      /></a>
                    </div>

                    <div class="item-entry overflow">
                      <h5>
                        <a href="/properties/<%= properties[i]._id%>">
                          <%= properties[i].name %>
                        </a>
                      </h5>
                      <div class="dot-hr"></div>
                      <span class="pull-left"
                        ><b> Area :</b> <%= properties[i].area %>
                      </span>
                      <span class="proerty-price pull-right"
                        ><%= properties[i].price %></span
                      >
                      <p style="display: none">
                        <%= properties[i].description %>
                      </p>
                      <div class="property-icon">
                        <img src="/assets/img/icon/bed.png" />(<%=
                        properties[i].bedRoom %>)|
                        <img src="/assets/img/icon/shawer.png" />(<%=
                        properties[i].bathRoom %>)
                      </div>
                    </div>
                  </div>
                </div>
                <%}%>
              </div>
            </div>
            <div class="col-md-12">
              <div class="pull-right">
                <div class="pagination">
                  <ul>
                    <li><a href="#">Prev</a></li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">Next</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer area-->
    <% include ./partial/footer %> <% include ./partial/script %>
  </body>
  <script>
    const regions = (<%- regions %>);
    addOptions('state', regions);
      $("#state").on('change', function(){
          var cities = $.grep( regions, function( n, i ) {
            return n.state == $("#state").val();
          });
          addOptions('district', cities);
      });

      function addOptions(id, arr){
          $("#"+id).children().remove();

          for(var idx in arr){
              // if(idx == 0) $("#"+id).append(new Option('Select '+id, ''));
              if(idx == 0 || arr[idx][id] != arr[idx-1][id]){
                  $("#"+id).append(new Option(arr[idx][id], arr[idx][id]));
              }
          }
          $('#district').selectpicker('refresh');
      }
  </script>
</html>
